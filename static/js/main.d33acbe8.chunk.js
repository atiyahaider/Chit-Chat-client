(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){},133:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},170:function(e,t){},174:function(e,t,a){},175:function(e,t,a){},184:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),o=a.n(c),l=(a(94),a(6)),s=a(9),i=(a(95),function(e){var t=e.width,a=e.height;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:a,viewBox:"0 0 20 10",className:"shadow"},r.a.createElement("defs",null,r.a.createElement("radialGradient",{id:"gradPurple",cx:"65%",cy:"50%",r:"50%",fx:"80%",fy:"50%"},r.a.createElement("stop",{offset:"0%",stopColor:"#e2d0e2"}),r.a.createElement("stop",{offset:"60%",stopColor:"#c5a0c5"}),r.a.createElement("stop",{offset:"100%",stopColor:"#8e578e"}))),r.a.createElement("g",{id:"shape8"},r.a.createElement("ellipse",{cx:"11",cy:"5",rx:"9",ry:"4.5",fill:"url(#gradPurple)"}),r.a.createElement("path",{d:"M3,6.5 Q3,8.5 0,8.25 Q3.25,10.2 5,8.25",fill:"#8e578e"}),r.a.createElement("text",{x:"4.5",y:"6.2",fontSize:"3.25px",fill:"white"},"Chit Chat")))}),u=(a(96),function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{id:"welcome",className:"heading"},"Welcome to ",r.a.createElement(i,{width:"110",height:"50"})),r.a.createElement("p",{id:"intro"},"Join chatrooms and chat with people on various topics and interests, or create your own chatroom."),r.a.createElement("p",{id:"loginMsg"},r.a.createElement(l.b,{to:"/login"},r.a.createElement("button",{className:"largeButton"},"Login")),"to start chatting"),r.a.createElement("p",null,"Don't have an account yet? ",r.a.createElement(l.b,{to:"/register"},"Register now")))}),m=a(2),d=a(80),f=a.n(d),p=a(22),b=a.n(p),E="https://chit-chat12.herokuapp.com",h=E+"/api",g=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,v=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})/,O={convertShortnames:!0,convertUnicode:!0,convertAscii:!0,style:{height:20,top:0}},j=(a(128),a(129),function(e){var t=e.displayMenu,a=e.email,n=e.name,c=e.logout,o=e.roomId,s=function(){return o?"/"+o:""};return r.a.createElement("div",{className:"banner"},r.a.createElement(i,{width:"80",height:"40"}),r.a.createElement("p",null,n?"Welcome "+n:null),t&&r.a.createElement("div",{id:"menu"},r.a.createElement("div",{id:"bar1",className:"bar"}),r.a.createElement("div",{id:"bar2",className:"bar"}),r.a.createElement("div",{id:"bar3",className:"bar"}),r.a.createElement("div",{className:"menuContent"},r.a.createElement(l.b,{className:"menuLink",to:"/updateProfile"+s()},"Update Profile"),r.a.createElement(l.b,{className:"menuLink",to:"/changePassword/"+a+"/"+n+s()},"Change Password"),r.a.createElement(l.b,{className:"menuLink",to:"/manageRooms"+s()},"Manage Rooms"),r.a.createElement("div",{className:"menuLink",onClick:c},"Logout"))))}),y=a(81),w=a.n(y),N=(a(133),function(e){var t=e.loading;return r.a.createElement("div",{className:"loading"},r.a.createElement(w.a,{size:25,color:"#41747c",loading:t}))}),C=a(83),k=a.n(C),S=(a(143),function(e){var t=e.showModal,a=e.closeModal,n=e.modalContent,c=e.callback;return r.a.createElement(k.a,{isOpen:t,contentLabel:"Error Message",onRequestClose:a,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!1,shouldReturnFocusAfterClose:!1,ariaHideApp:!1,style:{overlay:{backgroundColor:"rgb(238, 245, 246, 0.75)"},content:{background:"#41747c",width:"400px",height:"150px",padding:"5px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}}},r.a.createElement("div",{id:"innerModalDiv"},r.a.createElement("div",{id:"closeDiv",onClick:a},r.a.createElement("p",null,n.type),r.a.createElement("i",{id:"close",className:"fas fa-times"})),r.a.createElement("div",{id:"modalContent"},r.a.createElement("div",{id:"modalText"},r.a.createElement("div",null,n.content)),("DeleteAll"===n.type||"Delete"===n.type)&&r.a.createElement("div",{className:"modalButtons"},r.a.createElement("button",{onClick:c},"Yes"),r.a.createElement("button",{onClick:a},"Cancel")),"Information"===n.type&&r.a.createElement("div",{className:"modalButtons"},r.a.createElement("button",{onClick:c},"OK")))))}),x=function(){return{errorDescription:function(e){return e.response?"string"===typeof e.response.data.error?e.response.data.error:"Something went wrong. "+e.response.statusText:"Something went wrong. "+e.message},sessionExpired:function(e){return!(!e.response||401!==e.response.status)}}},P=function(e,t){var a=Object(n.useState)(!1),r=Object(m.a)(a,2),c=r[0],o=r[1];Object(n.useEffect)((function(){""!==e.content&&o(!0)}),[e]);return[c,function(){o(!1),t({type:"",content:""})}]},R=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(m.a)(o,2),u=i[0],d=i[1],p=Object(n.useState)({type:"",content:""}),E=Object(m.a)(p,2),v=E[0],O=E[1],y=Object(n.useState)(!1),w=Object(m.a)(y,2),C=w[0],k=w[1],R=Object(n.useState)(""),D=Object(m.a)(R,2),M=D[0],A=D[1],I=x().errorDescription,B=P(v,O),F=Object(m.a)(B,2),L=F[0],T=F[1],_=Object(s.f)(),U=Object(s.g)(),z=Object(n.useRef)();Object(n.useEffect)((function(){A(f.a.parse(U.search).err)}),[U.search]);return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!1}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Login"),""!==M?r.a.createElement("div",{className:"errorDiv"},M):r.a.createElement(N,{loading:C}),r.a.createElement("form",{className:"formFields"},r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{id:"email",type:"email",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"password",type:"password",value:u,onChange:function(e){return d(e.target.value)}})),r.a.createElement("button",{className:"largeButton",ref:z,onClick:function(e){e.preventDefault(),A(""),z.current&&z.current.setAttribute("disabled","disabled"),(""===a.trim()?(O({type:"Error",content:"Please enter an email address"}),0):g.test(a)?""===u.trim()?(O({type:"Error",content:"Please enter the password"}),0):(O({type:"",content:""}),1):(O({type:"Error",content:"Invalid email address"}),0))?(k(!0),b.a.get(h+"/login",{params:{email:a,password:u}}).then((function(e){localStorage.setItem("ChitChat",e.data.token),k(!1),_.push("/rooms")})).catch((function(e){k(!1),z.current&&z.current.removeAttribute("disabled"),O({type:"Error",content:I(e)})}))):z.current&&z.current.removeAttribute("disabled")}},"Login")),r.a.createElement("p",{className:"footNote"},r.a.createElement(l.b,{to:"/forgotPassword",style:C?{pointerEvents:"none"}:null},"Forgot password?")),r.a.createElement("p",{className:"footNote"},"Don't have an account?\xa0",r.a.createElement(l.b,{to:"/register",style:C?{pointerEvents:"none"}:null},"Register")),""!==v.content&&r.a.createElement(S,{showModal:L,closeModal:T,modalContent:v})))},D=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(m.a)(o,2),u=i[0],d=i[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),E=p[0],O=p[1],y=Object(n.useState)(""),w=Object(m.a)(y,2),C=w[0],k=w[1],R=Object(n.useState)({type:"",content:""}),D=Object(m.a)(R,2),M=D[0],A=D[1],I=Object(n.useState)(!1),B=Object(m.a)(I,2),F=B[0],L=B[1],T=P(M,A),_=Object(m.a)(T,2),U=_[0],z=_[1],H=x().errorDescription,$=Object(s.f)(),q=Object(n.useRef)();return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!1}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Register"),r.a.createElement(N,{loading:F}),r.a.createElement("form",{className:"formFields"},r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{id:"name",type:"text",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{id:"email",type:"email",value:u,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{id:"password",type:"password",value:E,onChange:function(e){return O(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{id:"confirmPassword",type:"password",value:C,onChange:function(e){return k(e.target.value)}})),r.a.createElement("button",{className:"largeButton",ref:q,onClick:function(e){e.preventDefault(),q.current&&q.current.setAttribute("disabled","disabled"),(""===a.trim()?(A({type:"Error",content:"Please enter your name"}),0):""===u.trim()?(A({type:"Error",content:"Please enter an email address"}),0):g.test(u)?""===E.trim()?(A({type:"Error",content:"Please enter the password"}),0):v.test(E)?""===C.trim()?(A({type:"Error",content:"Please confirm the password"}),0):E.trim()!==C.trim()?(A({type:"Error",content:"Passwords do not match"}),0):(A({type:"",content:""}),1):(A({type:"Error",content:"Password must have at least 1 lowercase and 1 uppercase letter, 1 number, 1 special character (!@#$%^&*), and must be at least 8 characters long."}),0):(A({type:"Error",content:"Invalid email address"}),0))?(L(!0),b.a.post(h+"/register",{name:a,email:u,password:E}).then((function(){L(!1),$.push("/login")})).catch((function(e){L(!1),q.current&&q.current.removeAttribute("disabled"),A({type:"Error",content:H(e)})}))):q.current&&q.current.removeAttribute("disabled")}},"Register")),r.a.createElement("p",{className:"footNote"},"Already have an account?\xa0",r.a.createElement(l.b,{to:"/login",style:F?{pointerEvents:"none"}:null},"Login")),""!==M.content&&r.a.createElement(S,{showModal:U,closeModal:z,modalContent:M})))},M=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({type:"",content:""}),i=Object(m.a)(o,2),u=i[0],d=i[1],f=Object(n.useState)(!1),p=Object(m.a)(f,2),E=p[0],v=p[1],O=x().errorDescription,y=P(u,d),w=Object(m.a)(y,2),C=w[0],k=w[1],R=Object(s.f)(),D=Object(n.useRef)();return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!1}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Forgot Password"),r.a.createElement(N,{loading:E}),r.a.createElement("form",{className:"formFields"},r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{id:"email",type:"email",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("button",{className:"largeButton",ref:D,onClick:function(e){e.preventDefault(),D.current&&D.current.setAttribute("disabled","disabled"),(""===a.trim()?(d({type:"Error",content:"Please enter an email address"}),0):g.test(a)?(d({type:"",content:""}),1):(d({type:"Error",content:"Invalid email address"}),0))?(v(!0),b.a.post(h+"/forgotPassword",{email:a}).then((function(e){v(!1),d({type:"Information",content:"An email has been sent to reset the password. Please follow the link in the email. The link will expire in an hour."})})).catch((function(e){v(!1),D.current&&D.current.removeAttribute("disabled"),d({type:"Error",content:O(e)})}))):D.current&&D.current.removeAttribute("disabled")}},"Reset Password")),r.a.createElement("div",null,r.a.createElement("p",{className:"footNote"},"Don't have an account?\xa0",r.a.createElement(l.b,{to:"/register",style:E?{pointerEvents:"none"}:null},"Register")),r.a.createElement("br",null),r.a.createElement("p",{className:"footNote"},"Already have an account?\xa0",r.a.createElement(l.b,{to:"/login",style:E?{pointerEvents:"none"}:null},"Login"))),""!==u.content&&r.a.createElement(S,{showModal:C,closeModal:k,modalContent:u,callback:function(){R.push("/")}})))},A=function(e){return e||(e=localStorage.getItem("ChitChat")),[b.a.create({baseURL:h,headers:{Authorization:"Bearer "+e}})]},I=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(""),f=Object(m.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)({type:"",content:""}),g=Object(m.a)(E,2),O=g[0],y=g[1],w=Object(n.useState)(!1),C=Object(m.a)(w,2),k=C[0],R=C[1],D=Object(n.useState)(""),M=Object(m.a)(D,2),I=M[0],B=M[1],F=Object(s.f)(),L=Object(n.useRef)(),T=Object(s.h)().token,_=P(O,y),U=Object(m.a)(_,2),z=U[0],H=U[1],$=x(),q=$.errorDescription,G=$.sessionExpired,J=A(T),K=Object(m.a)(J,1)[0];Object(n.useEffect)((function(){""!==I&&F.push("/login?err="+I)}),[I]),Object(n.useEffect)((function(){R(!0),K.get("/user/").then((function(e){c(e.data.email),R(!1)})).catch((function(e){R(!1),G(e)?B(q(e)):y({type:"Error",content:q(e)})}))}),[]);return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!1}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Reset Password"),r.a.createElement(N,{loading:k}),r.a.createElement("form",{className:"formFields"},r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"New Password"),r.a.createElement("input",{id:"password",type:"password",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{id:"confirmPassword",type:"password",value:p,onChange:function(e){return b(e.target.value)}})),r.a.createElement("button",{className:"largeButton",ref:L,onClick:function(e){e.preventDefault(),L.current&&L.current.setAttribute("disabled","disabled"),(""===i.trim()?(y({type:"Error",content:"Please enter the new password"}),0):v.test(i)?""===p.trim()?(y({type:"Error",content:"Please confirm the password"}),0):i.trim()!==p.trim()?(y({type:"Error",content:"Passwords do not match"}),0):(y({type:"",content:""}),1):(y({type:"Error",content:"Password must have at least 1 lowercase and 1 uppercase letter, 1 number, 1 special character (!@#$%^&*), and must be at least 8 characters long."}),0))?(R(!0),K.post(h+"/reset",{email:a,password:i}).then((function(){R(!1),F.push("/login")})).catch((function(e){R(!1),L.current&&L.current.removeAttribute("disabled"),G(e)?B(q(e)):y({type:"Error",content:q(e)})}))):L.current&&L.current.removeAttribute("disabled")}},"Reset")),""!==O.content&&r.a.createElement(S,{showModal:z,closeModal:H,modalContent:O})))},B=(a(144),a(145),function(e){var t=e.createNewRoom,a=e.isLoading,c=Object(n.useState)(""),o=Object(m.a)(c,2),l=o[0],s=o[1],i=Object(n.useRef)();Object(n.useEffect)((function(){a||i.current&&i.current.removeAttribute("disabled")}));return r.a.createElement("div",{id:"newRoomDiv"},r.a.createElement("form",null,r.a.createElement("input",{id:"newRoom",type:"text",value:l,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{className:"smallButton",ref:i,onClick:function(e){e.preventDefault(),i.current&&i.current.setAttribute("disabled","disabled"),t(l),s("")}},"New Chatroom")))}),F=a(16),L=a(4),T=a(84),_=a.n(T),U=function(e,t){var a=Object(n.useState)(""),r=Object(m.a)(a,2),c=r[0],o=r[1],l=Object(n.useState)([]),s=Object(m.a)(l,2),i=s[0],u=s[1],d=Object(n.useState)([]),f=Object(m.a)(d,2),p=f[0],b=f[1],h=Object(n.useState)([]),g=Object(m.a)(h,2),v=g[0],O=g[1],j=Object(n.useState)([]),y=Object(m.a)(j,2),w=y[0],N=y[1],C=Object(n.useRef)();Object(n.useEffect)((function(){var a=localStorage.getItem("ChitChat");return C.current=_()(E,{query:{token:a}}),C.current.on("error",(function(t){e(t)})),C.current.on("loginMember",(function(e,t){O((function(a){var n=a.findIndex((function(t){return t.email===e}));return-1!==n?[].concat(Object(L.a)(a.slice(0,n)),[{email:e,name:t,typing:"",status:"online"}],Object(L.a)(a.slice(n+1))):Object(L.a)(a)}))})),C.current.on("setMember",(function(e,t){O((function(a){var n=a.findIndex((function(t){return t.email===e}));return-1===n?[].concat(Object(L.a)(a),[{email:e,name:t,status:"online"}]):[].concat(Object(L.a)(a.slice(0,n)),[{email:e,name:t,typing:"",status:"online"}],Object(L.a)(a.slice(n+1)))}))})),C.current.on("logoutMember",(function(e,t){O((function(a){var n=a.findIndex((function(t){return t.email===e}));return-1!==n?[].concat(Object(L.a)(a.slice(0,n)),[{email:e,name:t,typing:"",status:""}],Object(L.a)(a.slice(n+1))):Object(L.a)(a)}))})),C.current.on("typing",(function(e,t){O((function(a){var n=a.findIndex((function(t){return t.email===e}));if(-1!==n){var r=a[n].status;return[].concat(Object(L.a)(a.slice(0,n)),[{email:e,name:t,typing:"...",status:r}],Object(L.a)(a.slice(n+1)))}return Object(L.a)(a)}))})),C.current.on("stopTyping",(function(e,t){O((function(a){var n=a.findIndex((function(t){return t.email===e}));if(-1!==n){var r=a[n].status;return[].concat(Object(L.a)(a.slice(0,n)),[{email:e,name:t,typing:"",status:r}],Object(L.a)(a.slice(n+1)))}return Object(L.a)(a)}))})),C.current.on("showNewMessage",(function(e){N((function(t){return[].concat(Object(L.a)(t),[e])})),""!==e.email&&t((function(e){return e+1}))})),C.current.on("deleteMessages",(function(e){N((function(t){return t.map((function(t){return e.includes(t._id)?Object(F.a)(Object(F.a)({},t),{},{name:"",message:"This message has been deleted",date:"",type:"txt"}):t}))})),t((function(t){return t-e.length}))})),C.current.on("userRoomAdded",(function(e){u((function(t){return[].concat(Object(L.a)(t),[e])}))})),C.current.on("roomAdded",(function(e){b((function(t){return[].concat(Object(L.a)(t),[e])}))})),C.current.on("userRoomDeleted",(function(e){u((function(t){var a=t.findIndex((function(t){return t._id===e}));return-1!==a?[].concat(Object(L.a)(t.slice(0,a)),Object(L.a)(t.slice(a+1))):Object(L.a)(t)}))})),C.current.on("roomDeleted",(function(e){b((function(t){var a=t.findIndex((function(t){return t._id===e}));return-1!==a?[].concat(Object(L.a)(t.slice(0,a)),Object(L.a)(t.slice(a+1))):Object(L.a)(t)}))})),C.current.on("roomNameChange",(function(e,t){o(t),u((function(a){var n=a.findIndex((function(t){return t._id===e}));return-1!==n?[].concat(Object(L.a)(a.slice(0,n)),[Object(F.a)(Object(F.a)({},a[n]),{},{room:t})],Object(L.a)(a.slice(n+1))):Object(L.a)(a)})),b((function(a){var n=a.findIndex((function(t){return t._id===e}));return-1!==n?[].concat(Object(L.a)(a.slice(0,n)),[Object(F.a)(Object(F.a)({},a[n]),{},{room:t})],Object(L.a)(a.slice(n+1))):Object(L.a)(a)}))})),function(){C.current.disconnect()}}),[e,t]);return{room:c,setRoom:o,userRooms:i,setUserRooms:u,rooms:p,setRooms:b,members:v,setMembers:O,messages:w,setMessages:N,broadcastLogin:function(e,t){C.current.emit("login",e,t)},joinRoom:function(e,t,a){C.current.emit("joinRoom",e,t,a)},leaveRoom:function(e,t){return new Promise((function(a){return C.current.emit("leaveRoom",e,t,(function(){a()}))}))},emitTyping:function(e,t,a){C.current.emit("typing",e,t,a)},emitStopTyping:function(e,t,a){C.current.emit("stopTyping",e,t,a)},emitMessage:function(e){return console.log(e),new Promise((function(t,a){return C.current.emit("newMessage",e,(function(e){e?a(e):t()}))}))},emitClearChat:function(e){return new Promise((function(t,a){return C.current.emit("clearChat",e,(function(e){e?a(e):t()}))}))},emitDeleteMessages:function(e,t){return new Promise((function(a,n){return C.current.emit("deleteMessages",e,t,(function(e){e?n(e):a()}))}))},emitLogout:function(e,t,a){return new Promise((function(n,r){return C.current.emit("logout",e,t,a,(function(e){e?r(e):(localStorage.removeItem("ChitChat"),n())}))}))},broadcastOffline:function(e){C.current.emit("offline",e)},emitNewRoom:function(e){return new Promise((function(t,a){return C.current.emit("addRoom",e,(function(e){e?a(e):t()}))}))},emitEdittedRoomName:function(e,t){return new Promise((function(a,n){return C.current.emit("updateRoomName",e,t,(function(e){e?n(e):a()}))}))},emitDeleteRoom:function(e){return new Promise((function(t,a){return C.current.emit("deleteRoom",e,(function(e){e?a(e):t()}))}))},updateProfile:function(e,t){return new Promise((function(a,n){return C.current.emit("updateProfile",e,t,(function(e){e?n(e):a()}))}))}}},z=a(5),H=a.n(z),$=a(14),q=function(e,t,a){return[function(){var n=Object($.a)(H.a.mark((function n(r){return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==r.trim()){n.next=3;break}return e({type:"Error",content:"Please enter a name for the chatroom"}),n.abrupt("return");case 3:return t(!0),n.prev=4,n.next=7,a(r);case 7:t(!1),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(4),t(!1),e({type:"Error",content:n.t0});case 14:case"end":return n.stop()}}),n,null,[[4,10]])})));return function(e){return n.apply(this,arguments)}}()]},G=function(e,t,a,r,c,o,l,i){var u=Object(s.f)();return i||(i=""),Object(n.useEffect)((function(){""!==e&&(""!==o?c(i,o,l).then((function(){u.push("/login?err="+e)})).catch((function(e){t(""),a(!1),r({type:"Error",content:e})})):u.push("/login?err="+e))}),[e]),[function(){var e=Object($.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,c(i,o,l);case 4:a(!1),u.push("/login"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a(!1),r({type:"Error",content:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()]},J=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)({type:"",content:""}),f=Object(m.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(!1),h=Object(m.a)(E,2),g=h[0],v=h[1],O=Object(n.useState)(""),y=Object(m.a)(O,2),w=y[0],C=y[1],k=x(),R=k.errorDescription,D=k.sessionExpired,M=A(),I=Object(m.a)(M,1)[0],F=P(p,b),L=Object(m.a)(F,2),T=L[0],_=L[1],z=U(C),H=z.userRooms,$=z.setUserRooms,J=z.rooms,K=z.setRooms,Z=z.broadcastLogin,Q=z.emitLogout,W=z.emitNewRoom,Y=q(b,v,W),V=Object(m.a)(Y,1)[0],X=G(w,C,v,b,Q,a,i),ee=Object(m.a)(X,1)[0],te=Object(s.f)();Object(n.useEffect)((function(){localStorage.getItem("ChitChat")?(v(!0),I.get("/rooms").then((function(e){c(e.data.email),u(e.data.name),$(e.data.userRooms),K(e.data.rooms),Z(e.data.email,e.data.name),v(!1)})).catch((function(e){v(!1),D(e)?C(R(e)):b({type:"Error",content:R(e)})}))):te.push("/login")}),[]);var ae=function(e){e.persist(),v(!0),I.put("/rooms/join",{roomId:e.target.id,email:a}).then((function(){v(!1),te.push("/chat/"+e.target.id)})).catch((function(e){v(!1),D(e)?C(R(e)):b({type:"Error",content:R(e)})}))};return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!0,name:i,email:a,logout:ee}),r.a.createElement("div",{className:"roomButtonContainer"},r.a.createElement(N,{loading:g}),r.a.createElement(B,{createNewRoom:V,isLoading:g})),r.a.createElement("div",{className:"chatRooms"},r.a.createElement("div",null,r.a.createElement("div",{className:"subBanner"},"My Chatrooms"),r.a.createElement("div",{className:"roomContainer roomGrid"},H.map((function(e){return r.a.createElement("div",{key:e._id,id:e._id,onClick:ae},e.room)})))),r.a.createElement("div",null,r.a.createElement("div",{className:"subBanner"},"Other Chatrooms"),r.a.createElement("div",{className:"roomContainer roomGrid"},J.map((function(e){return r.a.createElement("div",{key:e._id,id:e._id,onClick:ae},e.room)}))))),""!==p.content&&r.a.createElement(S,{showModal:T,closeModal:_,modalContent:p}))},K=(a(174),a(85)),Z=a.n(K),Q=(a(175),r.a.memo((function(e){var t=e.members;return r.a.createElement("div",{id:"peopleList"},r.a.createElement("ul",null,t?t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",null,e.name),""!==e.typing&&r.a.createElement("div",null,r.a.createElement(Z.a,{size:6,color:"#bfbfbf"})),""!==e.status&&r.a.createElement("div",{id:"status"}))})):null))}))),W=a(33),Y=a(86),V=(a(184),r.a.memo((function(e){var t=e.messages,a=e.email,c=e.deleteMessages,o=e.checkboxes,l=e.handleCheckboxChange;return Object(n.useEffect)((function(){var e=document.getElementById("chats");e.scrollTop=e.scrollHeight})),r.a.createElement("div",{id:"chats"},t?t.map((function(e,t){return r.a.createElement("div",{className:"chat",key:e._id},c&&""!==e.email&&""!==e.name&&r.a.createElement("input",{type:"checkbox",id:e._id,className:e.email===a?"myCheckbox":"chatCheckbox",checked:o[e._id],onChange:l}),r.a.createElement("div",{className:"message"+(e.email===a?" myMessage":""===e.email?" adminMessage":" chatMessage")},""!==e.name&&""!==e.date&&r.a.createElement("p",{className:"credentials"},e.name,", ",function(e){var t=new Date;t.setHours(0,0,0,0);var a=new Date(e);return a.setHours(0,0,0,0),t.valueOf()===a.valueOf()?new Date(e).toLocaleTimeString("en-US"):new Date(e).toLocaleString("en-US")}(e.date)),r.a.createElement("p",{className:"messageContent"+(""===e.name&&""===e.date?" messageDeleted":"")},-1!==e.message.indexOf("base64")?r.a.createElement("img",{src:e.message,alt:""}):"video"===e.type?r.a.createElement("video",{src:"' + msg.message + '",width:"320",height:"240",controls:!0}):r.a.createElement(Y.a,{allowedFormats:["URL","Email","Image"],linkTarget:"_blank"},Object(W.emojify)(e.message,O)))))})):null)}))),X=a(87),ee=a(88),te=(a(186),a(187),function(e){var t,a=e.sendMessage,c=e.isLoading,o=e.handleEmitTyping,l=e.handleEmitStopTyping,s=e.uploadImage,i=Object(n.useState)(""),u=Object(m.a)(i,2),d=u[0],f=u[1],p=Object(n.useState)(!1),b=Object(m.a)(p,2),E=b[0],h=b[1],g=Object(n.useRef)(),v=Object(n.useRef)(),j=Object(n.useRef)();Object(n.useEffect)((function(){c||g.current&&g.current.removeAttribute("disabled")}));return r.a.createElement("div",null,r.a.createElement("form",{id:"messageForm"},r.a.createElement("input",{id:"message",type:"text",value:d,onChange:function(e){return f(e.target.value)},onKeyPress:function(e){clearTimeout(t),o()},onKeyUp:function(e){clearTimeout(t),t=setTimeout((function(){l()}),1e3)},onClick:function(){return h(!1)}}),r.a.createElement("button",{className:"icon",ref:g,onClick:function(e){e.preventDefault(),g.current&&g.current.setAttribute("disabled","disabled"),h(!1),a(d),f("")}},r.a.createElement("i",{className:"fas fa-paper-plane"})),r.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&s(e.target.files[0])},accept:"image/*",style:{display:"none"},ref:v}),r.a.createElement("button",{className:"icon",ref:j,onClick:function(e){e.preventDefault(),j.current&&v.current.click()}},r.a.createElement("i",{className:"fas fa-paperclip"})),E?r.a.createElement(n.Fragment,null,r.a.createElement("span",{className:"emojiPicker"},r.a.createElement(ee.a,{set:"apple",data:X,onSelect:function(e){f((function(t){return t+e.native}))},perLine:6,emojiSize:20,showPreview:!1,showSkinTones:!1})),r.a.createElement("p",{className:"icon emojiButton",onClick:function(){return h(!1)}},r.a.createElement("i",{className:"fas fa-keyboard"}))):r.a.createElement("p",{className:"emojiButton",onClick:function(){return h(!0)}},Object(W.emojify)(":)",O))))}),ae=a(27),ne=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),l=Object(m.a)(o,2),s=l[0],i=l[1],u=Object(n.useState)({}),d=Object(m.a)(u,2),f=d[0],p=d[1],b=function(e){Object.keys(f).forEach((function(t){p((function(a){return Object(F.a)(Object(F.a)({},a),{},Object(ae.a)({},t,e))}))}))};return[r,s,f,function(){c(!0),p(e.filter((function(e){return""!==e.email&&""!==e.name})).reduce((function(e,t){return Object(F.a)(Object(F.a)({},e),{},Object(ae.a)({},t._id,!1))}),{}))},function(){i(!0),b(!0)},function(){i(!1),b(!1)},function(){c(!1),b(!1)},function(e){var t=e.target.id;p((function(e){return Object(F.a)(Object(F.a)({},e),{},Object(ae.a)({},t,!e[t]))}))},function(){return Object.values(f).filter((function(e){return e})).length>0}]},re=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(),f=Object(m.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(0),h=Object(m.a)(E,2),g=h[0],v=h[1],O=Object(n.useState)({type:"",content:""}),y=Object(m.a)(O,2),w=y[0],C=y[1],k=Object(n.useState)(!1),R=Object(m.a)(k,2),D=R[0],M=R[1],I=Object(n.useState)(""),B=Object(m.a)(I,2),F=B[0],L=B[1],T=Object(s.f)(),_=Object(s.h)().roomId,z=x(),q=z.errorDescription,J=z.sessionExpired,K=A(),Z=Object(m.a)(K,1)[0],W=P(w,C),Y=Object(m.a)(W,2),X=Y[0],ee=Y[1],ae=U(L,v),re=ae.room,ce=ae.setRoom,oe=ae.members,le=ae.setMembers,se=ae.messages,ie=ae.setMessages,ue=ae.joinRoom,me=ae.leaveRoom,de=ae.emitTyping,fe=ae.emitStopTyping,pe=ae.emitMessage,be=ae.emitClearChat,Ee=ae.emitDeleteMessages,he=ae.emitLogout,ge=ae.broadcastOffline,ve=ne(se),Oe=Object(m.a)(ve,9),je=Oe[0],ye=Oe[1],we=Oe[2],Ne=Oe[3],Ce=Oe[4],ke=Oe[5],Se=Oe[6],xe=Oe[7],Pe=Oe[8],Re=G(F,L,M,C,he,a,i,_),De=Object(m.a)(Re,1)[0];Object(n.useEffect)((function(){localStorage.getItem("ChitChat")?(M(!0),Z.get("/chat/"+_).then((function(e){c(e.data.email),u(e.data.name),ce(e.data.roomData.room),b(e.data.roomData.admin),le(e.data.roomData.members),ie(e.data.roomData.messages),v(e.data.roomData.messages.length),ue(_,e.data.email,e.data.name),e.data.offline.length>0&&ge(e.data.offline),M(!1)})).catch((function(e){M(!1),J(e)?L(q(e)):C({type:"Error",content:q(e)})}))):T.push("/login")}),[]);var Me=function(){var e=Object($.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.trim()){e.next=3;break}return C({type:"Error",content:"Please enter a message"}),e.abrupt("return");case 3:return M(!0),e.prev=4,e.next=7,pe({roomId:_,email:a,name:i,message:t});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),C({type:"Error",content:e.t0});case 12:M(!1);case 13:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object($.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(_,i);case 3:T.push("/rooms"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),C({type:"Error",content:e.t0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object($.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,be(_);case 4:M(!1),ee(),ie([]),v(0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),M(!1),C({type:"Error",content:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object($.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.keys(we).filter((function(e){return we[e]})),M(!0),e.prev=2,e.next=5,Ee(_,t);case 5:M(!1),ee(),Se(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),M(!1),C({type:"Error",content:e.t0});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!0,name:i,email:a,logout:De,roomId:_}),r.a.createElement("div",{id:"topContainer"},r.a.createElement("div",{id:"spinnerContainer"},r.a.createElement(N,{loading:D})),r.a.createElement("div",{id:"chatButtonContainer"},je?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"leftButtons"},ye?r.a.createElement("button",{className:"icon",onClick:ke,title:"Deselect All"},r.a.createElement("i",{className:"far fa-check-square"})):r.a.createElement("button",{className:"icon",onClick:Ce,title:"Select All"},r.a.createElement("i",{className:"far fa-square"})),r.a.createElement("button",{className:"icon",onClick:function(){Pe()?C({type:"Delete",content:"Are you sure you want to delete the selected messages?"}):C({type:"Error",content:"Please select the messages to delete"})},title:"Delete Messages"},r.a.createElement("i",{className:"fas fa-trash-alt"})),r.a.createElement("button",{className:"icon",onClick:Se,title:"Cancel"},r.a.createElement("i",{className:"fas fa-times"})))):p===a&&g>0?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"leftButtons"},r.a.createElement("button",{className:"icon",onClick:function(){C({type:"DeleteAll",content:"This will delete all the messages. Are you sure you want to clear the chat?"})},title:"Clear Chat"},r.a.createElement("i",{className:"fas fa-comment-slash"})),r.a.createElement("button",{className:"icon",onClick:Ne,title:"Delete Messages"},r.a.createElement("i",{className:"fas fa-trash-alt"})))):null,r.a.createElement("div",{className:"rightButtons"},r.a.createElement("button",{className:"icon",onClick:Ae,title:"Leave Room"},r.a.createElement("i",{id:"leaveIcon",className:"fas fa-sign-out-alt fa-rotate-180"}))))),r.a.createElement("div",{id:"chatroomContent"},r.a.createElement("div",{id:"sidePanel"},r.a.createElement("div",{id:"room"},"Room: ",r.a.createElement("span",{id:"roomName"},re)),r.a.createElement("p",{id:"subHeading"},"People in chatroom"),r.a.createElement(Q,{members:oe})),r.a.createElement("div",{id:"chatContainer"},r.a.createElement(V,{messages:se,email:a,deleteMessages:je,checkboxes:we,handleCheckboxChange:xe}),r.a.createElement(te,{sendMessage:Me,isLoading:D,handleEmitTyping:function(){de(_,a,i)},handleEmitStopTyping:function(){fe(_,a,i)},uploadImage:function(e){if(console.log(e.type),e&&e.type.match("image.*")){var t=new FileReader;t.addEventListener("load",Object($.a)(H.a.mark((function n(){var r,c;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return M(!0),r=t.result,c=e.type.match("image.*")?"image":"video",n.prev=3,n.next=6,pe({roomId:_,email:a,name:i,message:r,type:c});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),C({type:"Error",content:n.t0});case 11:M(!1);case 12:case"end":return n.stop()}}),n,null,[[3,8]])})))),t.readAsDataURL(e)}else C({type:"Error",content:"Please select an image file"})}}))),""!==w.content&&r.a.createElement(S,{showModal:X,closeModal:ee,modalContent:w,callback:"DeleteAll"===w.type?Ie:Be}))},ce=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)({type:"",content:""}),f=Object(m.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(!1),h=Object(m.a)(E,2),g=h[0],v=h[1],O=Object(n.useState)(""),y=Object(m.a)(O,2),w=y[0],C=y[1],k=Object(n.useRef)(),R=Object(s.f)(),D=Object(s.h)().roomId,M=P(p,b),I=Object(m.a)(M,2),B=I[0],F=I[1],L=x(),T=L.errorDescription,_=L.sessionExpired,z=U(C),q=z.leaveRoom,J=z.updateProfile,K=z.emitLogout,Z=A(),Q=Object(m.a)(Z,1)[0],W=G(w,C,v,b,K,a,i),Y=Object(m.a)(W,1)[0];Object(n.useEffect)((function(){localStorage.getItem("ChitChat")?(v(!0),Q.get("/user/").then((function(e){c(e.data.email),u(e.data.name),v(!1),D&&q(D,e.data.name)})).catch((function(e){v(!1),_(e)?C(T(e)):b({type:"Error",content:T(e)})}))):R.push("/login")}),[]);var V=function(){var e=Object($.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k.current&&k.current.setAttribute("disabled","disabled"),""===i.trim()?(b({type:"Error",content:"Please enter your name"}),0):(b({type:"",content:""}),1)){e.next=5;break}return k.current&&k.current.removeAttribute("disabled"),e.abrupt("return");case 5:return v(!0),e.prev=6,e.next=9,J(a,i);case 9:v(!1),R.goBack(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),v(!1),k.current&&k.current.removeAttribute("disabled"),b({type:"Error",content:e.t0});case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!0,name:i,email:a,logout:Y}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Update Profile"),r.a.createElement(N,{loading:g}),r.a.createElement("form",{className:"formFields"},r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Email: ",a)),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{id:"name",type:"text",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"largeButton",onClick:function(e){e.preventDefault(),R.goBack()}},"<< Back"),r.a.createElement("button",{className:"largeButton",ref:k,onClick:V},"Update"))),""!==p.content&&r.a.createElement(S,{showModal:B,closeModal:F,modalContent:p})))},oe=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(""),f=Object(m.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)({type:"",content:""}),h=Object(m.a)(E,2),g=h[0],O=h[1],y=Object(n.useState)(!1),w=Object(m.a)(y,2),C=w[0],k=w[1],R=Object(n.useState)(""),D=Object(m.a)(R,2),M=D[0],I=D[1],B=Object(n.useRef)(),F=Object(s.f)(),L=Object(s.h)(),T=L.email,_=L.name,z=L.roomId,H=P(g,O),$=Object(m.a)(H,2),q=$[0],J=$[1],K=x(),Z=K.errorDescription,Q=K.sessionExpired,W=A(),Y=Object(m.a)(W,1)[0],V=U(I),X=V.emitLogout,ee=V.leaveRoom,te=G(M,I,k,O,X,T,_),ae=Object(m.a)(te,1)[0];Object(n.useEffect)((function(){z&&ee(z,_)}),[z,_,ee]);return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!0,name:_,email:T,logout:ae}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Change Password"),r.a.createElement(N,{loading:C}),r.a.createElement("form",{className:"formFields"},r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Email: ",T)),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Old Password"),r.a.createElement("input",{id:"oldPassword",type:"password",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"New Password"),r.a.createElement("input",{id:"newPassword",type:"password",value:i,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"inputField"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{id:"confirmPassword",type:"password",value:p,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"largeButton",onClick:function(e){e.preventDefault(),F.goBack()}},"<< Back"),r.a.createElement("button",{className:"largeButton",ref:B,onClick:function(e){e.preventDefault(),B.current&&B.current.setAttribute("disabled","disabled"),(""===a.trim()?(O({type:"Error",content:"Please enter the old password"}),0):""===i.trim()?(O({type:"Error",content:"Please enter the new password"}),0):v.test(i)?""===p.trim()?(O({type:"Error",content:"Please confirm the new password"}),0):i.trim()!==p.trim()?(O({type:"Error",content:"Passwords do not match"}),0):(O({type:"",content:""}),1):(O({type:"Error",content:"Password must have at least 1 lowercase and 1 uppercase letter, 1 number, 1 special character (!@#$%^&*), and must be at least 8 characters long."}),0))?(k(!0),Y.put("/changePassword",{email:T,oldPassword:a,newPassword:i}).then((function(){k(!1),F.goBack()})).catch((function(e){k(!1),B.current&&B.current.removeAttribute("disabled"),Q(e)?I(Z(e)):O({type:"Error",content:Z(e)})}))):B.current&&B.current.removeAttribute("disabled")}},"Change"))),""!==g.content&&r.a.createElement(S,{showModal:q,closeModal:J,modalContent:g})))},le=(a(188),function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],u=l[1],d=Object(n.useState)(""),f=Object(m.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)({type:"",content:""}),h=Object(m.a)(E,2),g=h[0],v=h[1],O=Object(n.useState)(!1),y=Object(m.a)(O,2),w=y[0],C=y[1],k=Object(n.useState)(""),R=Object(m.a)(k,2),D=R[0],M=R[1],I=Object(n.useState)(!1),F=Object(m.a)(I,2),L=F[0],T=F[1],_=Object(n.useState)(""),z=Object(m.a)(_,2),J=z[0],K=z[1],Z=Object(s.f)(),Q=Object(s.h)().roomId,W=x(),Y=W.errorDescription,V=W.sessionExpired,X=A(),ee=Object(m.a)(X,1)[0],te=P(g,v),ae=Object(m.a)(te,2),ne=ae[0],re=ae[1],ce=U(M),oe=ce.userRooms,le=ce.setUserRooms,se=ce.emitLogout,ie=ce.leaveRoom,ue=ce.emitNewRoom,me=ce.emitEdittedRoomName,de=ce.emitClearChat,fe=ce.emitDeleteRoom,pe=q(v,C,ue),be=Object(m.a)(pe,1)[0],Ee=G(D,M,C,v,se,a,i),he=Object(m.a)(Ee,1)[0];Object(n.useEffect)((function(){localStorage.getItem("ChitChat")?(C(!0),ee.get("/userRooms").then((function(e){c(e.data.email),u(e.data.name),le(e.data.userRooms),C(!1),Q&&ie(Q,e.data.name)})).catch((function(e){C(!1),V(e)?M(Y(e)):v({type:"Error",content:Y(e)})}))):Z.push("/login")}),[]);var ge=function(){T(!1),K(""),b("")},ve=function(e){e.preventDefault(),ge()},Oe=function(){var e=Object($.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==J.trim()){e.next=4;break}return v({type:"Error",content:"Please enter a name for the chatroom"}),e.abrupt("return");case 4:if(J.trim()!==oe[p].room){e.next=7;break}return ge(),e.abrupt("return");case 7:return C(!0),e.prev=8,e.next=11,me(oe[p]._id,J);case 11:C(!1),ge(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),C(!1),v({type:"Error",content:e.t0});case 19:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object($.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,de(oe[p]._id);case 4:C(!1),b(""),re(),v({type:"Information",content:"Chat cleared."}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),C(!1),v({type:"Error",content:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object($.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,fe(oe[p]._id);case 4:C(!1),b(""),re(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),C(!1),v({type:"Error",content:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(j,{displayMenu:!0,name:i,email:a,logout:he}),r.a.createElement("div",{className:"roomButtonContainer"},r.a.createElement(N,{loading:w}),r.a.createElement(B,{createNewRoom:be,isLoading:w})),r.a.createElement("div",{className:"chatRooms"},r.a.createElement("div",null,r.a.createElement("div",{className:"subBanner"},"My Chatrooms"),r.a.createElement("div",{className:"roomContainer"},oe.map((function(e,t){return r.a.createElement("div",{className:"roomItem",key:e._id},L&&p===t?r.a.createElement(n.Fragment,null,r.a.createElement("input",{type:"text",value:J,onChange:function(e){return K(e.target.value)}}),r.a.createElement("div",null,r.a.createElement("button",{className:"icon",onClick:Oe,title:"Save"},r.a.createElement("i",{id:"saveIcon",className:"fas fa-check"})),r.a.createElement("button",{className:"icon",onClick:ve,title:"Cancel"},r.a.createElement("i",{id:"cancelIcon",className:"fas fa-times"})))):r.a.createElement(n.Fragment,null,r.a.createElement("div",{id:e._id},e.room),r.a.createElement("div",null,r.a.createElement("button",{className:"icon",onClick:function(){return function(e){T(!0),b(e),K(oe[e].room)}(t)},title:"Edit Room"},r.a.createElement("i",{className:"fas fa-pencil-alt"})),r.a.createElement("button",{className:"icon",onClick:function(){return function(e){T(!1),K(""),b(e),v({type:"DeleteAll",content:"This will delete all the messages. Are you sure you want to clear the chat?"})}(t)},title:"Clear Chat"},r.a.createElement("i",{className:"fas fa-comment-slash"})),r.a.createElement("button",{className:"icon",onClick:function(){return function(e){T(!1),K(""),b(e),v({type:"Delete",content:"This will delete all the messages and all member subscriptions to this room. Are you sure you want to delete this room?"})}(t)},title:"Delete Room"},r.a.createElement("i",{className:"fas fa-trash-alt"})))))}))))),r.a.createElement("button",{className:"largeButton",onClick:function(e){e.preventDefault(),Z.goBack()}},"<< Back"),""!==g.content&&r.a.createElement(S,{showModal:ne,closeModal:re,modalContent:g,callback:"DeleteAll"===g.type?je:"Delete"===g.type?ye:re}))}),se=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"heading"},"Sorry, page not found"))};var ie=function(){return r.a.createElement(l.a,{basename:"/Chit-Chat-client"},r.a.createElement("div",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(u,null)),r.a.createElement(s.a,{path:"/login"},r.a.createElement(R,null)),r.a.createElement(s.a,{path:"/register"},r.a.createElement(D,null)),r.a.createElement(s.a,{path:"/forgotPassword"},r.a.createElement(M,null)),r.a.createElement(s.a,{path:"/resetPassword/:token"},r.a.createElement(I,null)),r.a.createElement(s.a,{path:"/rooms"},r.a.createElement(J,null)),r.a.createElement(s.a,{path:"/chat/:roomId"},r.a.createElement(re,null)),r.a.createElement(s.a,{path:"/updateProfile/:roomId?"},r.a.createElement(ce,null)),r.a.createElement(s.a,{path:"/changePassword/:email/:name/:roomId?"},r.a.createElement(oe,null)),r.a.createElement(s.a,{path:"/manageRooms/:roomId?"},r.a.createElement(le,null)),r.a.createElement(s.a,null,r.a.createElement(se,null)))))};o.a.render(r.a.createElement(ie,null),document.getElementById("root"))},89:function(e,t,a){e.exports=a(189)},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.d33acbe8.chunk.js.map